//WAREHOUSE TEST1
import unitn.aose.warehousesim.api.ITellerMachine;
import unitn.aose.warehousesim.api.AreaState;
import unitn.aose.warehousesim.api.ITicket;
import unitn.aose.warehousesim.data.Box;
import unitn.aose.warehousesim.data.Area;
import unitn.aose.warehousesim.api.data.Ticket;
import unitn.aose.warehousesim.data.StorageArea;

System.out.println("> Script test2.bsh");

//setup warehouse
Box box1 = warehouse.createBox("StorageAreaA1");

ITellerMachine t1 = warehouse.getTellerMachine("PickAreaA");

System.out.println("# "+box1+" created at StorageAreaA1");

//---- TEST 2 ----
ticket = t1.requestWithdraw(box1); //bring the box1 

if(null == ticket){
	System.err.println("! cannot elaborate deposit");
	return;
}

System.out.println("> waiting for "+box1+" withdraw: tracking number "+ticket.getCode()+ " (state "+ticket.getState()+")");
ticketManager.waitForTicket(ticket, 20000); //wait 20 seconds
if(ticket.getState()!=Ticket.TICKET_DONE){
	System.err.println("! ticket expired and not done");
	return;
}

System.out.println("> "+ticket.getCode()+" marked as done");
a = box1.getArea();
if(!(a instanceof StorageArea)){
	System.err.println("! "+box1+" not correctly stored");
}else{
	System.out.println("> "+box1+" stored at "+a);
}





